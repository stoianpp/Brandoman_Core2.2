@using Brandoman.Data.Models.ViewModels
@using Brandoman.Common

@model IQueryable<AdminIndexViewModel>

@{
    ViewData["Title"] = "Records";
}

@if (User.IsInRole(GlobalConstants.AdministratorRoleName))
{
    <div class="container">
        @using (Html.BeginForm(null, null, FormMethod.Post, new { style = "padding-top:30px" }))
        {
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <div class="row">
                                <div class="col col-xs-6">
                                    <h2 class="card-title">@ViewBag.Title</h2>
                                </div>
                                <div class="col col-xs-6 text-right">
                                    <input type="button" class="btn-bootstrap-dialog btn btn-success pull-right button-width" data-url="@Url.Action("AddEditRecord", "Product", new { title = "Add Product", cat = ViewBag.CurrentCategoryId, subCat = ViewBag.CurrentSubCategoryId })" value="Create New" data-toggle="modal" />
                                </div>
                            </div>
                        </div>
                        <div class="panel-body" style="padding-bottom:1px">
                            <table id="TblProducts" class="table table-striped table-bordered table-list">
                                <thead>
                                    <tr class="titleTr">
                                        <th class="text-center">
                                            Product Name
                                        </th>
                                        <th class="text-center">
                                            Sub Category
                                        </th>
                                        <th class="text-center">
                                            Details
                                        </th>
                                        <th class="text-center">
                                            Actions
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var Data in Model)
                                    {
                                        string details = @Data.Details.Length > 0 ? "Available details with " + @Data.Details.Length + " symbols length" : "...not available...";
                                        <tr data-order="@Data.Order" data-productId="@Data.Id">
                                            <td style="text-align: center">@Data.Name</td>
                                            <td style="text-align: center">@Data.SubCategory</td>
                                            <td style="text-align: center">@details</td>
                                            <td class="text-center" style="text-align: center">
                                                <input type="button" class="btn-bootstrap-dialog btn edit" data-url="@Url.Action("AddEditRecord", "Product", new { id = Data.Id, cat = ViewBag.CurrentCategoryId, subCat = ViewBag.CurrentSubCategoryId })" />
                                                <input type="button" class="btn-bootstrap-dialog1 btn delete" data-id="@Data.Id" data-url="@Url.Action("DeleteRecord", "Product", new { id = Data.Id, cat = ViewBag.CurrentCategoryId, subCat = ViewBag.CurrentSubCategoryId })" />
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                            <p><i>&nbsp;* Drag and drop record to change the order of appearance</i></p>
                        </div>
                        <!--Its Pop up for Edit and Add-->
                        <div class="modal fade" id="bootstrapDialog" tabindex="-1" role="dialog" aria-labelledby="myModal-label" aria-hidden="true"></div>
                    </div>
                </div>
            </div>
            /*It’s a pop up for Delete*/
            <div class="modal fade" id="myModal1" role="dialog">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Delete</h5>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <p>Are you sure you want to delete the record?</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn pull-right button-width" id="confirmCancel" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-success pull-right button-width" id="confirmOk">Ok</button>
                        </div>
                    </div>
                </div>
            </div>
            /*It’s a pop up for Save New Order*/
            <div class="modal fade" id="myModal2" role="dialog">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Save Order</h5>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <p>Do you want to save the new order?</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger pull-right button-width" id="confirmOrderCancel" data-dismiss="modal">Cancel</button>
                            <button type="Submit" class="btn btn-success pull-right button-width" id="confirmOrderOk">Ok</button>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
}